<!DOCTYPE html>
<html>
  <head>
    <title>Login</title>
  </head>
  <body>
    <h1>Parking System Login</h1>

    <form id="loginForm">
      Username: <input type="text" id="username" required><br><br>
      Password: <input type="password" id="password" required><br><br>
      <button type="button" onclick="submitLogin()">Login</button>
    </form>

    <script>
      async function submitLogin() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        if (!username || !password) {
          alert('Please fill in both fields!');
          return;
        }

        // Make a POST request to the Google Apps Script
        const loginUrl = 'https://script.google.com/macros/s/AKfycbxd2RZqWd-LeyjtZKaHBaThuPnnfVJCixqDkrUbvDXRyEr_ssQ-htToiSfSRFQWIX-LSQ/exec';  // Replace with your script URL
        const response = await fetch(loginUrl, {
          method: 'POST',
          body: new URLSearchParams({
            username: username,
            password: password
          })
        });

        const result = await response.json();

        if (result.success) {
          // Redirect to the main parking system page on successful login
          window.location.href = 'main.html';  // Replace with your main system page
        } else {
          alert(result.message);  // Show error message if login fails
        }
      }
    </script>
  </body>
</html>
